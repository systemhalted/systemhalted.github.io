---
layout: page
title: Categories
description: "An archive of posts sorted by categories."
permalink: /categories/
---

{% assign themes = site.data.taxonomy.themes %}

{% for theme in themes %}
  {%- comment -%}
    Compute how many posts exist across all categories in this theme
  {%- endcomment -%}
  {% assign total_posts = 0 %}
  {% for cat in theme.categories %}
    {% assign posts = site.categories[cat] %}
    {% if posts %}
      {% assign post_count = posts | size %}
      {% assign total_posts = total_posts | plus: post_count %}
    {% endif %}
  {% endfor %}

  {% if total_posts > 0 %}
    <h2 id="{{ theme.id }}">{{ theme.title }}</h2>

    {% if theme.description %}
      <p>{{ theme.description }}</p>
    {% endif %}

    {% for cat in theme.categories %}
      {% assign posts = site.categories[cat] | sort: "date" | reverse %}
      {% if posts and posts.size > 0 %}
        <section id="cat-{{ cat | slugify }}" class="category-block">
          <details>
            <summary>
              {{ cat }}
              <span class="category-count">({{ posts.size }})</span>
            </summary>

            <ul class="category-posts">
              {% for post in posts %}
                <li>
                  <span class="post-date">
                    {{ post.date | date: "%Y-%m-%d" }}
                  </span>
                  <a href="{{ post.url | relative_url }}">
                    {{ post.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          </details>
        </section>
      {% endif %}
    {% endfor %}
  {% endif %}
{% endfor %}

<h2>Other categories</h2>

{% assign taxonomy_cats = "" | split: "," %}
{% for theme in themes %}
  {% assign taxonomy_cats = taxonomy_cats | concat: theme.categories %}
{% endfor %}

{% for cat in site.categories %}
  {% assign cat_name = cat[0] %}
  {% assign posts = cat[1] | sort: "date" | reverse %}
  {% assign in_taxonomy = false %}

  {% if taxonomy_cats contains cat_name %}
    {% assign in_taxonomy = true %}
  {% endif %}

  {% unless in_taxonomy %}
    <section id="cat-{{ cat_name | slugify }}" class="category-block">
      <details>
        <summary>
          {{ cat_name }}
          <span class="category-count">({{ posts.size }})</span>
        </summary>

        <ul class="category-posts">
          {% for post in posts %}
            <li>
              <span class="post-date">
                {{ post.date | date: "%Y-%m-%d" }}
              </span>
              <a href="{{ post.url | relative_url }}">
                {{ post.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </details>
    </section>
  {% endunless %}
{% endfor %}