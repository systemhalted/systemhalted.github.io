---
layout: default
title: Home
---

<div class="post-grid">
  {% for post in paginator.posts %}
    {% assign summary = post.description | default: post.excerpt | strip_html | truncate: 140 %}
    {% assign author_name = post.author | default: site.author.name | default: "systemhalted" %}
    {% assign thumb = post.featured_image %}
    <article class="post-card">
      <a class="card-media" href="{{ post.url | relative_url }}">
        {% if thumb %}
          <img src="{{ thumb | relative_url }}" alt="{{ post.featured_image_alt | default: post.title }}">
        {% else %}
          <div class="card-thumb-placeholder">
            <span>{{ post.title | slice: 0, 1 | upcase }}</span>
          </div>
        {% endif %}
      </a>
      <div class="card-body">
        <div class="card-meta">
          <span class="card-date">{{ post.date | date: "%b %d, %Y" }}</span>
        </div>
        <h2 class="card-title">
          <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
        </h2>
        {% if summary %}
          <p class="card-excerpt">{{ summary }}</p>
        {% endif %}
        <div class="card-author">
          <div class="author-avatar">{{ author_name | slice: 0, 1 | upcase }}</div>
          <span class="author-name">{{ author_name }}</span>
        </div>
      </div>
    </article>
  {% endfor %}
</div>

<nav class="pager" aria-label="Pagination">
  {% assign total_pages = paginator.total_pages %}
  {% assign current = paginator.page %}

  {% assign window = 2 %}
  {% assign start_page = current | minus: window %}
  {% if start_page < 2 %}{% assign start_page = 2 %}{% endif %}
  {% assign end_page = current | plus: window %}
  {% assign last_inner = total_pages | minus: 1 %}
  {% if end_page > last_inner %}{% assign end_page = last_inner %}{% endif %}

  {% if current > 1 %}
    <a class="page-btn" href="{{ '/' | relative_url }}">First</a>
    <a class="page-btn" href="{{ paginator.previous_page_path | relative_url }}">‹ Back</a>
  {% else %}
    <span class="page-btn disabled">First</span>
    <span class="page-btn disabled">‹ Back</span>
  {% endif %}

  {% if current == 1 %}
    <span class="page-btn active">1</span>
  {% else %}
    <a class="page-btn" href="{{ '/' | relative_url }}">1</a>
  {% endif %}

  {% if start_page > 2 %}
    <span class="page-ellipsis">…</span>
  {% endif %}

  {% for page_num in (start_page..end_page) %}
    {% if page_num == current %}
      <span class="page-btn active">{{ page_num }}</span>
    {% else %}
      <a class="page-btn" href="{{ paginator.paginate_path | replace: ':num', page_num | relative_url }}">{{ page_num }}</a>
    {% endif %}
  {% endfor %}

  {% if end_page < last_inner %}
    <span class="page-ellipsis">…</span>
  {% endif %}

  {% if total_pages > 1 %}
    {% if current == total_pages %}
      <span class="page-btn active">{{ total_pages }}</span>
    {% else %}
      <a class="page-btn" href="{{ paginator.paginate_path | replace: ':num', total_pages | relative_url }}">{{ total_pages }}</a>
    {% endif %}
  {% endif %}

  {% if paginator.next_page %}
    <a class="page-btn" href="{{ paginator.next_page_path | relative_url }}">Next ›</a>
    <a class="page-btn" href="{{ paginator.paginate_path | replace: ':num', total_pages | relative_url }}">Last</a>
  {% else %}
    <span class="page-btn disabled">Next ›</span>
    <span class="page-btn disabled">Last</span>
  {% endif %}
</nav>
